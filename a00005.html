<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>avr.sdk: Référence du fichier include/I2C_master_core.h</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">avr.sdk
   </div>
   <div id="projectbrief">SDK pour les projets AVR</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Généré par Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Recherche');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Page&#160;principale</span></a></li>
      <li><a href="pages.html"><span>Pages&#160;associées</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Structures&#160;de&#160;données</span></a></li>
      <li class="current"><a href="files.html"><span>Fichiers</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Recherche" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>Liste&#160;des&#160;fichiers</span></a></li>
      <li><a href="globals.html"><span>Variables&#160;globale</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('a00005.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Fonctions</a>  </div>
  <div class="headertitle">
<div class="title">Référence du fichier I2C_master_core.h</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;util/twi.h&gt;</code><br />
</div>
<p><a href="a00005_source.html">Aller au code source de ce fichier.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Fonctions</h2></td></tr>
<tr class="memitem:af2e33b12dfc58fa7665ca45c72278428"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00005.html#af2e33b12dfc58fa7665ca45c72278428">I2C_Initialize</a> (void)</td></tr>
<tr class="memdesc:af2e33b12dfc58fa7665ca45c72278428"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialise l'interface I2C en mode maitre (master)  <a href="#af2e33b12dfc58fa7665ca45c72278428">Plus de détails...</a><br /></td></tr>
<tr class="separator:af2e33b12dfc58fa7665ca45c72278428"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afce134e0a1b6a8bc503c97b37639c9e6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00005.html#afce134e0a1b6a8bc503c97b37639c9e6">I2C_Stop</a> (void)</td></tr>
<tr class="memdesc:afce134e0a1b6a8bc503c97b37639c9e6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Termine le transfert des données et libère le buss I2C.  <a href="#afce134e0a1b6a8bc503c97b37639c9e6">Plus de détails...</a><br /></td></tr>
<tr class="separator:afce134e0a1b6a8bc503c97b37639c9e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fa77e034cac43151f8b3fd6c48ffe48"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00005.html#a4fa77e034cac43151f8b3fd6c48ffe48">I2C_Start</a> (const uint8_t address)</td></tr>
<tr class="memdesc:a4fa77e034cac43151f8b3fd6c48ffe48"><td class="mdescLeft">&#160;</td><td class="mdescRight">Déclanche le démarrage de la transmission.  <a href="#a4fa77e034cac43151f8b3fd6c48ffe48">Plus de détails...</a><br /></td></tr>
<tr class="separator:a4fa77e034cac43151f8b3fd6c48ffe48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a127e1ac60c1d7d230a88c71ee6f9f863"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00005.html#a127e1ac60c1d7d230a88c71ee6f9f863">I2C_RepeatedStart</a> (const uint8_t address)</td></tr>
<tr class="memdesc:a127e1ac60c1d7d230a88c71ee6f9f863"><td class="mdescLeft">&#160;</td><td class="mdescRight">Déclanche le démarrage répété de la transmission.  <a href="#a127e1ac60c1d7d230a88c71ee6f9f863">Plus de détails...</a><br /></td></tr>
<tr class="separator:a127e1ac60c1d7d230a88c71ee6f9f863"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0974257590dfeaab06ab467d17aa19d4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00005.html#a0974257590dfeaab06ab467d17aa19d4">I2C_StartWait</a> (const uint8_t address)</td></tr>
<tr class="memdesc:a0974257590dfeaab06ab467d17aa19d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Déclanche le démarrage de la transmission.  <a href="#a0974257590dfeaab06ab467d17aa19d4">Plus de détails...</a><br /></td></tr>
<tr class="separator:a0974257590dfeaab06ab467d17aa19d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acdc9cf8e6a61ad21b2befe3d82de97d4"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00005.html#acdc9cf8e6a61ad21b2befe3d82de97d4">I2C_Send</a> (const uint8_t data)</td></tr>
<tr class="memdesc:acdc9cf8e6a61ad21b2befe3d82de97d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Envoi un byte au périphérique I2C.  <a href="#acdc9cf8e6a61ad21b2befe3d82de97d4">Plus de détails...</a><br /></td></tr>
<tr class="separator:acdc9cf8e6a61ad21b2befe3d82de97d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f85a56a349448fcc67ec19e87d9dc3b"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00005.html#a0f85a56a349448fcc67ec19e87d9dc3b">I2C_ReadAck</a> (void)</td></tr>
<tr class="memdesc:a0f85a56a349448fcc67ec19e87d9dc3b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lit un byte du périphérique I2C et demande la transmission des données suivantes.  <a href="#a0f85a56a349448fcc67ec19e87d9dc3b">Plus de détails...</a><br /></td></tr>
<tr class="separator:a0f85a56a349448fcc67ec19e87d9dc3b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a7e4e6afa98be22172bc213cc62bc64"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00005.html#a4a7e4e6afa98be22172bc213cc62bc64">I2C_ReadNak</a> (void)</td></tr>
<tr class="memdesc:a4a7e4e6afa98be22172bc213cc62bc64"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lit un byte du périphérique I2C. La lecture est suivie par l'envoi d'une condition STOP.  <a href="#a4a7e4e6afa98be22172bc213cc62bc64">Plus de détails...</a><br /></td></tr>
<tr class="separator:a4a7e4e6afa98be22172bc213cc62bc64"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Documentation des fonctions</h2>
<a class="anchor" id="af2e33b12dfc58fa7665ca45c72278428"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void I2C_Initialize </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialise l'interface I2C en mode maitre (master) </p>
<dl class="section note"><dt>Note</dt><dd>Cette méthode n'est à appeler qu'une seule fois </dd></dl>

</div>
</div>
<a class="anchor" id="a0f85a56a349448fcc67ec19e87d9dc3b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t I2C_ReadAck </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Lit un byte du périphérique I2C et demande la transmission des données suivantes. </p>
<dl class="section return"><dt>Renvoie</dt><dd>Byte lut du périphérique</dd></dl>
<p>Exemple : </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;uint8_t byte = I2C_ReadAck();</div>
</div><!-- fragment --> 
</div>
</div>
<a class="anchor" id="a4a7e4e6afa98be22172bc213cc62bc64"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t I2C_ReadNak </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Lit un byte du périphérique I2C. La lecture est suivie par l'envoi d'une condition STOP. </p>
<dl class="section return"><dt>Renvoie</dt><dd>Byte lut du périphérique</dd></dl>
<p>Exemple : </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;uint8_t byte = I2C_ReadNak();</div>
</div><!-- fragment --> 
</div>
</div>
<a class="anchor" id="a127e1ac60c1d7d230a88c71ee6f9f863"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t I2C_RepeatedStart </td>
          <td>(</td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"><em>address</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Déclanche le démarrage répété de la transmission. </p>
<p>Envoi un démarrage répété de la transmission des données vers le périphérique dont l'adresse est fournie en paramètre.</p>
<dl class="params"><dt>Paramètres</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">address</td><td>Adresse du périphérique avec son mode de transmission (TW_READ ou TW_WRITE)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Renvoie</dt><dd>Valeur indiquant si le périphérique est accessible ou non</dd></dl>
<dl class="retval"><dt>Valeurs retournées</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0x00</td><td>Périphérique accessible (pas d'erreur) </td></tr>
    <tr><td class="paramname">0x01</td><td>Périphérique innaccessible (Erreur rencontrée)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Avertissement</dt><dd>La direction des données est à fournir avec l'adresse.</dd></dl>
<p>Exemple : </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;// Adresse du périphérique tel que spécifié dans sa datasheet</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;#define PERIPH_ADDR    0b01101010</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;if (I2C_RepeatedStart(PERIPH_ADDR + TW_READ) != 0)</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;{</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;    // Erreur d&#39;accès au périphérique</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;}</div>
</div><!-- fragment --> 
</div>
</div>
<a class="anchor" id="acdc9cf8e6a61ad21b2befe3d82de97d4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t I2C_Send </td>
          <td>(</td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Envoi un byte au périphérique I2C. </p>
<dl class="params"><dt>Paramètres</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">data</td><td>byte à transmettre</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Renvoie</dt><dd>Valeur indiquant si l'envoi a réussi ou non</dd></dl>
<dl class="retval"><dt>Valeurs retournées</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0x00</td><td>Envoi réussi (pas d'erreur) </td></tr>
    <tr><td class="paramname">0x01</td><td>Echec de l'envoi (Erreur rencontrée)</td></tr>
  </table>
  </dd>
</dl>
<p>Exemple : </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;if (I2C_Send(0x55) != 0)</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;{</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;    // Erreur d&#39;envoi du byte 0x55 au périphérique</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;}</div>
</div><!-- fragment --> 
</div>
</div>
<a class="anchor" id="a4fa77e034cac43151f8b3fd6c48ffe48"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t I2C_Start </td>
          <td>(</td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"><em>address</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Déclanche le démarrage de la transmission. </p>
<p>Démarrer la transmission des données vers le périphérique dont l'adresse est fournie en paramètre.</p>
<dl class="params"><dt>Paramètres</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">address</td><td>Adresse du périphérique avec son mode de transmission (TW_READ ou TW_WRITE)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Renvoie</dt><dd>Valeur indiquant si le périphérique est accessible ou non</dd></dl>
<dl class="retval"><dt>Valeurs retournées</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0x00</td><td>Périphérique accessible (pas d'erreur) </td></tr>
    <tr><td class="paramname">0x01</td><td>Périphérique innaccessible (Erreur rencontrée)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Avertissement</dt><dd>La direction des données est à fournir avec l'adresse.</dd></dl>
<p>Exemple : </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;// Adresse du périphérique tel que spécifié dans sa datasheet</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;#define PERIPH_ADDR    0b01101010</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;if (I2C_Start(PERIPH_ADDR + TW_READ) != 0)</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;{</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;    // Erreur d&#39;accès au périphérique</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;}</div>
</div><!-- fragment --> 
</div>
</div>
<a class="anchor" id="a0974257590dfeaab06ab467d17aa19d4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void I2C_StartWait </td>
          <td>(</td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"><em>address</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Déclanche le démarrage de la transmission. </p>
<p>Démarre une transmission et attend que le pérophérique soit prêt. Si le périphérique est occupé, la fonction effectue du polling jusqu'à ce qu'un ack soit reçu indiquant que le périphérique est disponible.</p>
<dl class="params"><dt>Paramètres</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">address</td><td>Adresse du périphérique avec son mode de transmission (TW_READ ou TW_WRITE)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Avertissement</dt><dd>La direction des données est à fournir avec l'adresse.</dd></dl>
<p>Exemple : </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;// Adresse du périphérique tel que spécifié dans sa datasheet</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;#define PERIPH_ADDR    0b01101010</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;I2C_StartWait(PERIPH_ADDR + TW_READ);</div>
</div><!-- fragment --> 
</div>
</div>
<a class="anchor" id="afce134e0a1b6a8bc503c97b37639c9e6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void I2C_Stop </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Termine le transfert des données et libère le buss I2C. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_05b7b4f536b9e3a4aecd1837151d279c.html">include</a></li><li class="navelem"><a class="el" href="a00005.html">I2C_master_core.h</a></li>
    <li class="footer">Généré le Samedi 31 Octobre 2015 00:46:37 pour avr.sdk par
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
